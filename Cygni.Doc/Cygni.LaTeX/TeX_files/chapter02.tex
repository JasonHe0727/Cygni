\chapter{Core Cygni}
Ok, if you have some programming experience before, I think maybe you don't have to go through all of the contents. Some small examples may be more helpful. Let's begin.

\section{Your First Cygni Program}
Here is a simple script which writes message to the screen.

\subsection{The Code}
\begin{lstlisting}
print("Hello Cygni!")
\end{lstlisting}

\subsection{Running the Program}
Input the previous code in the interpreter, then you will see the input "Hello Cygni!" in the screen.
\section{Variables}
The variables in Cygni are dynamic, which means they can be any type, such as number, boolean, string, etc.

You declare variables in Cygni by simply assigning values to them:
\begin{lstlisting}
a = 12
b = true
\end{lstlisting}

You may assign one value to several variables:
\begin{lstlisting}
a = b = 89.32
\end{lstlisting}

\section{Variable Scope}
The scope of a variable is the region of code from which variable can be accessed. In Cygni, the scope is determined by the following rules:
\begin{itemize}
	\item A class, which contains fields, has its own scope.
	\item A function, which contains local variables, has its own scope.
	\item If a variable is not defined in a class or a scope, then it is a global variable, which stays in the global scope.
	\item Built-in variables are in the built-in scope, which is immutable in the runtime.
\end{itemize}

The rule of finding variables is: local -> field -> global -> built-in

\section{Types}
See table \ref{predefined_types}.
\begin{table}
	\begin{tabular}{|c|c|c|c|}
		\hline
		Name & CTS Type & Description & Range(Approximate)  \\ 
		\hline
		number & System.Double & 64-bit, double precision floating point & $ \pm 4.9 \times 10 ^ {-324} \sim 1.7 \times 10 ^ {308} $ \\
		boolean & System.Boolean & Represents true or false & true or false \\
		string & System.String & Unicode character string & \\
		\hline
	\end{tabular}
	\label{predefined_types}
	\caption{Predefined Types}
\end{table}

\subsection{The number type}
The number type is actually the double type in C\#.
\subsection{The boolean type}
The boolean type can only be true or false.
\subsection{The string type}
Literals of the string type should be enclosed by '' or "". Backslashes('\\') represents escape sequence. If you write symbol '@' at the beginning of the sentence, the '\\' will lose its meanning.
\begin{lstlisting}
s1 = "a string"
s2 = 'another string'
s3 = @'c:\test.txt' # If literals start with '@', the backslashes will lose its meanning
s4 = 'c:\\test.txt' # The 's4' equals to 's3;
\end{lstlisting}

\section{Flow Control}
\subsection{Conditional Statement: The if Statement}
The syntax of 'if' statement is as followings:
\begin{lstlisting}
if condition {
	# Do something
} else {
	# Do something
}
\end{lstlisting}
The final 'else' statement is not a must. If you have several branches, it is convenient to use 'elif' statement for represent them. 
\begin{lstlisting}
if condition {
	# Branch One 
} elif {
	# Branch Two 
} elif {
	# Branch Three
} 
\end{lstlisting}

\subsection{Loops}
\subsubsection{The for loop} 
Cygni for loop provides a mechanism for iterating from a given start to a given end. The syntax is
\begin{lstlisting}
for iterator = start, end {
	# Do something
}
\end{lstlisting}
The iterator will increase one in performing one iteration. If you want to define the step rather than one, you may use the following syntax:
\begin{lstlisting}
for iterator = start, end, step {
	# Do something
}
\end{lstlisting}
If the step is negative, the negative step will be added to the iterator in every iteration. Note that the step can't be zero. Namely, the step is a non-zero integer. If the step is not an integer, it will be forced into an integer. Another important point is that you should not change the value of the iterator inside the loop.

\subsubsection{The while loop}
The syntax of while is
\begin{lstlisting}
while condition {
	# Do something
}
\end{lstlisting}
Unlike the for loop, the while loop are able to repeat a block of statements for a number of times that is not known before the loop begins. The condition only taks a boolean value.
\subsubsection{The foreach loop}
The foreach loop enables you to iterate through each item in a collection(If you don't know what is collection, don't worry. We will talk about it later). There are some built-in collections, such as lists, dictionaries, etc. The syntax is
\begin{lstlisting}
foreach item in collection {
	# Do something
}
\end{lstlisting}
Note that you should not change value inside the loop.

\subsection{Jump Statements}
\subsubsection{The break Statement}
If the break statement occurs in a loop, the current loop will stop.
\subsubsection{The continue Statement}
The continue statement is similar to break. Nevertheless, the execution of the current loop will restart at the beginning of the next iteration of the loop, rather than stop.
\subsubsection{The return Statement}
The return statement is used to exit a function, returning control to the caller of the function. If the function don't return value, you may just write 'return null' instead.

\section{Console I/O}
There are two functions used to read and write in the console in most of the cases: print and input. 
\begin{lstlisting}
print('Always nice to see you, Waston.')
\end{lstlisting}

\section{Using Comments}
The line comments start with symbol \#.
\begin{lstlisting}
# This is a line comment
\end{lstlisting}

\section{Rules for Identifiers}
Identifiers are the names you give to variables, functions, structs, classes, and so on. Identifiers are case senstive. Here are the rules for identifiers you can use in Cygni:
\begin{itemize}
	\item They can contain letter , underscore or numeric characters. However, they must begin with a letter or underscore.
	\item The Cygni keywords can't be used as identifiers.
\end{itemize}

The following list displays the Cygni reserved keywords.
\begin{itemize}
	\item if
	\item else
	\item elif
	\item for
	\item while
	\item foreach
	\item in
	\item break
	\item continue
	\item return
	\item def
	\item class
	\item true
	\item false
	\item null
\end{itemize}

\section{Position}
Have a look at another example.
\begin{lstlisting}
class Position{
	def __INIT__(nx, ny){
		this.x = nx
		this.y = ny
	}
	
	def move(nx, ny){
		this.x = nx
		this.y = ny
	}
	
	def __TOSTRING__(){
		printf("({0}, {1})", this.x, this.y)
	}
	
}

p1 = Position(10,20)
print(p1)
p1.move(35,47)
print(p1)
\end{lstlisting}	

Hope you have got a feel about Cygni!
